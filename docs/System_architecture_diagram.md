┌─────────────────────────────────────────────────────────────────┐
│                         用户浏览器                                 │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │              React Frontend (Vite)                        │   │
│  │                                                            │   │
│  │  ├─ QuestionPage: 显示题目和选项                           │   │
│  │  ├─ ReflectionPage: 错题复盘问答                           │   │
│  │  ├─ DiagnosisPage: 显示错因诊断                            │   │
│  │  └─ StatsPage: 错误统计图表                                │   │
│  └──────────────────────────────────────────────────────────┘   │
│                          ↕ HTTP/REST API                         │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      Backend Server                              │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐   │
│  │           FastAPI (Python 3.11+)                          │   │
│  │                                                            │   │
│  │  API Endpoints:                                            │   │
│  │  ├─ POST /api/submit-answer      (提交答案)               │   │
│  │  ├─ POST /api/submit-reflection  (提交复盘)               │   │
│  │  ├─ GET  /api/diagnosis/{id}     (获取诊断)               │   │
│  │  └─ GET  /api/stats/{user_id}    (获取统计)               │   │
│  │                                                            │   │
│  │  Core Modules:                                             │   │
│  │  ├─ error_diagnosis.py    (规则引擎)                       │   │
│  │  ├─ gemini_service.py     (LLM调用封装)                    │   │
│  │  └─ models.py             (数据模型)                       │   │
│  └──────────────────────────────────────────────────────────┘   │
│                          ↕ SQLAlchemy ORM                        │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                      Data Layer                                  │
│                                                                   │
│  ┌─────────────────┐        ┌────────────────────────────┐      │
│  │   SQLite DB     │        │   Google Gemini API        │      │
│  │   (开发环境)     │        │   (gemini-1.5-flash)       │      │
│  │                 │        │                            │      │
│  │  Tables:        │        │  用途:                      │      │
│  │  - questions    │        │  - 生成错因解释             │      │
│  │  - user_answers │        │  - 长难句分析               │      │
│  │  - reflections  │        │  - 个性化建议               │      │
│  │  - error_types  │        └────────────────────────────┘      │
│  └─────────────────┘                                             │
└─────────────────────────────────────────────────────────────────┘